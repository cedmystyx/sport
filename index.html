<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <title>Big Data Digital City</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <script src="https://aframe.io/releases/1.4.2/aframe.min.js"></script>
  <style>
    body {
      margin: 0;
      overflow: hidden;
      background: black;
    }

    .binary {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      font-family: monospace;
      font-size: 14px;
      line-height: 1.2;
      color: #0ff;
      opacity: 0.08;
      pointer-events: none;
      white-space: pre;
      animation: scroll 20s linear infinite;
      z-index: 5;
    }

    @keyframes scroll {
      0% { transform: translateY(-100%); }
      100% { transform: translateY(100%); }
    }
  </style>
</head>
<body>

<!-- âœ… Code binaire (Matrix effect) -->
<div class="binary">
  0110010101010110101001010010101010101001010010101010100100101010<br>
  1010100101010010101010101010010101001010100101010101010100101010<br>
  0101010010101001010101010010101010101001010010101010100100101010<br>
  1010100101010010101010101010010101001010100101010101010100101010<br>
</div>

<!-- âœ… Audio immersif futuriste -->
<audio autoplay loop>
  <source src="https://cdn.pixabay.com/audio/2023/03/07/audio_eb50a9b332.mp3" type="audio/mpeg">
</audio>

<!-- âœ… ScÃ¨ne A-Frame -->
<a-scene background="color: #000">

  <!-- CamÃ©ra en mouvement -->
  <a-entity id="cameraRig" position="0 2 20"
    animation="property: position; to: 0 2 -400; dur: 40000; easing: linear; loop: true">
    <a-entity camera look-controls="enabled: false"></a-entity>
  </a-entity>

  <!-- LumiÃ¨res bleues -->
  <a-entity light="type: ambient; color: #0ff; intensity: 0.4"></a-entity>
  <a-entity light="type: directional; color: #0ff; intensity: 0.8" position="0 10 10"></a-entity>

  <!-- âœ… Sol avec shader animÃ© -->
  <a-entity geometry="primitive: plane; width: 200; height: 800"
            rotation="-90 0 0"
            material="shader: custom-grid"></a-entity>

  <!-- âœ… BÃ¢timents numÃ©riques -->
  <a-entity id="city"></a-entity>

  <!-- ðŸ“œ Script pour les bÃ¢timents -->
  <script>
    AFRAME.registerComponent('generate-city', {
      init: function () {
        const container = this.el;
        for (let i = 0; i < 350; i++) {
          const box = document.createElement('a-box');
          const x = (Math.random() - 0.5) * 80;
          const z = -i * 5 - 10;
          const h = Math.random() * 12 + 2;
          box.setAttribute('position', `${x} ${h/2} ${z}`);
          box.setAttribute('width', '3');
          box.setAttribute('depth', '3');
          box.setAttribute('height', h.toFixed(2));
          box.setAttribute('color', '#0ff');
          box.setAttribute('opacity', '0.4');
          container.appendChild(box);
        }
      }
    });

    document.querySelector('#city').setAttribute('generate-city', '');
  </script>

  <!-- ðŸ“œ Shader personnalisÃ© pour le sol -->
  <script>
    AFRAME.registerShader('custom-grid', {
      schema: { timeMsec: { type: 'time', is: 'uniform' } },
      vertexShader: `
        varying vec2 vUV;
        void main() {
          vUV = uv;
          gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);
        }
      `,
      fragmentShader: `
        uniform float timeMsec;
        varying vec2 vUV;
        void main() {
          float t = timeMsec / 1000.0;
          float gridX = step(0.02, abs(mod(vUV.x * 40.0, 1.0) - 0.5));
          float gridY = step(0.02, abs(mod(vUV.y * 100.0 + t * 2.0, 1.0) - 0.5));
          float grid = gridX + gridY;
          vec3 color = vec3(0.0, 1.0, 1.0) * grid;
          gl_FragColor = vec4(color, 0.3);
        }
      `
    });
  </script>

</a-scene>

</body>
</html>

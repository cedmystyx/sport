<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <title>Lycée Louis de Cormontaigne – Section Sportive</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <!-- A-Frame et extras pour déplacement VR/multiplateforme -->
  <script src="https://aframe.io/releases/1.4.2/aframe.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/aframe-extras@7.0.0/dist/aframe-extras.controls.min.js"></script>
  <style>
    body { margin: 0; overflow: hidden; background: #111; font-family: Arial, sans-serif; }
    #header {
      position: fixed; left: 20px; top: 20px; z-index: 100;
      color: #fff; background: rgba(0,0,0,0.92);
      padding: 18px 30px; border-radius: 10px;
      font-size: 2.1rem; font-family: 'Segoe UI', Arial, sans-serif;
      letter-spacing: 1.5px; box-shadow: 0 3px 24px #00ffff44;
      border-left: 5px solid #00ffff; text-shadow: 0 2px 20px #00ffff88;
      max-width: 90vw;
    }
    #subtitle {
      display: block; font-size: 1.1rem; color: #00ffff;
      margin-top: 8px; letter-spacing: 1px; font-weight: bold;
      text-shadow: 0 1px 8px #00ffff77;
    }
    #welcome {
      display: block; font-size: 1.15rem; color: #fff;
      margin-top: 14px; letter-spacing: 0.5px; font-weight: 400;
      text-shadow: 0 1px 10px #00224488;
    }
    @media (max-width: 600px) {
      #header { font-size: 1.2rem; padding:10px 8px; }
    }
  </style>
</head>
<body>

  <a-scene vr-mode-ui="enabled: true" background="color: #1a232b" device-orientation-permission-ui="enabled: true">
    <!-- Ciel doux statique -->
    <a-sky color="#1a232b"></a-sky>

    <!-- Caméra + mains VR + déplacement multiplateforme -->
    <a-entity id="rig" position="0 1.6 13">
      <a-entity id="player"
        camera
        look-controls="pointerLockEnabled: false"
        wasd-controls="acceleration: 25; fly: false"
        universal-controls
        movement-controls="fly: false; speed: 0.17; constrainToNavMesh: false"
        touch-controls
        position="0 0 0">
      </a-entity>
      <!-- Mains VR -->
      <a-entity hand-controls="hand: left" id="main-gauche"></a-entity>
      <a-entity hand-controls="hand: right" id="main-droite"></a-entity>
    </a-entity>

    <!-- Lumière douce et directionnelle -->
    <a-entity light="type: ambient; color: #428fa7; intensity: 0.85"></a-entity>
    <a-entity light="type: directional; color: #aef9ff; intensity: 0.23" position="0 8 0"></a-entity>

    <!-- Sol doux et léger -->
    <a-plane color="#202c38" width="36" height="36" rotation="-90 0 0" position="0 0 0" material="roughness:0.92; metalness:0.0;"></a-plane>

    <!-- Décor sportif ultra-léger -->
    <a-torus color="#39e06a" opacity="0.13" radius="11" radius-tubular="0.18" arc="360" rotation="90 0 0" position="0 0.01 0"></a-torus>
    <a-box color="#eeeeee" width="2.2" height="1.3" depth="0.08" position="0 0.65 -10" opacity="0.65"></a-box>
    <a-box color="#eeeeee" width="2.2" height="1.3" depth="0.08" position="0 0.65 10" opacity="0.65"></a-box>
    <a-cylinder color="#ffad00" height="0.8" radius="0.18" position="-4 0.4 -4"></a-cylinder>
    <a-cylinder color="#ffad00" height="0.8" radius="0.18" position="4 0.4 4"></a-cylinder>
    <a-sphere color="#00eedd" radius="0.22" position="-12 0.55 0" opacity="0.36"></a-sphere>
    <a-sphere color="#00eedd" radius="0.22" position="12 0.55 0" opacity="0.36"></a-sphere>
    <a-sphere color="#00eedd" radius="0.22" position="0 0.55 12" opacity="0.36"></a-sphere>
    <a-sphere color="#00eedd" radius="0.22" position="0 0.55 -12" opacity="0.36"></a-sphere>

    <!-- 4 buildings centrés, noms sportifs -->
    <a-box color="#00eedd" width="2.7" height="4.3" depth="2.7" position="-2.8 2.15 -2.8" opacity="0.80" shadow="cast:true"></a-box>
    <a-entity position="-2.8 4.7 -2.8">
      <a-plane width="3.5" height="0.8" color="#111" opacity="0.94"></a-plane>
      <a-text value="Football" width="3" align="center" color="#00eedd" position="0 0 0.01" anchor="center"></a-text>
    </a-entity>
    <a-box color="#ffad00" width="2.7" height="4.3" depth="2.7" position="2.8 2.15 -2.8" opacity="0.80" shadow="cast:true"></a-box>
    <a-entity position="2.8 4.7 -2.8">
      <a-plane width="3.5" height="0.8" color="#111" opacity="0.94"></a-plane>
      <a-text value="Basketball" width="3" align="center" color="#ffad00" position="0 0 0.01" anchor="center"></a-text>
    </a-entity>
    <a-box color="#00bfff" width="2.7" height="4.3" depth="2.7" position="-2.8 2.15 2.8" opacity="0.80" shadow="cast:true"></a-box>
    <a-entity position="-2.8 4.7 2.8">
      <a-plane width="3.5" height="0.8" color="#111" opacity="0.94"></a-plane>
      <a-text value="Handball" width="3" align="center" color="#00bfff" position="0 0 0.01" anchor="center"></a-text>
    </a-entity>
    <a-box color="#8fff8f" width="2.7" height="4.3" depth="2.7" position="2.8 2.15 2.8" opacity="0.80" shadow="cast:true"></a-box>
    <a-entity position="2.8 4.7 2.8">
      <a-plane width="3.5" height="0.8" color="#111" opacity="0.94"></a-plane>
      <a-text value="Athlétisme" width="3" align="center" color="#39e06a" position="0 0 0.01" anchor="center"></a-text>
    </a-entity>

    <!-- Panneau d'accueil face au joueur (billboard simple) -->
    <a-entity id="accueil-panel"
      position="0 2 -4"
      rotation="0 0 0"
      accueil-billboard>
      <a-plane width="8" height="2.2" color="#001c23" opacity="0.97"
               material="shader: flat; side: double; transparent: true; emissive: #00ffff; emissiveIntensity: 0.04"></a-plane>
      <a-text value="Bienvenue au Lycée Louis de Cormontaigne\nSection Sportive"
              width="7.5" align="center" color="#00ffff"
              position="0 0.4 0.01" side="double" anchor="center"
              font="mozillavr" shader="msdf"></a-text>
      <a-text value="Avance avec le joystick, ZQSD ou tactile. Aucun lag !"
              width="6.5" align="center" color="#fff"
              position="0 -0.5 0.01" side="double" anchor="center"
              font="mozillavr" shader="msdf"></a-text>
    </a-entity>
    <script>
      // Panneau accueil toujours devant la caméra
      AFRAME.registerComponent('accueil-billboard', {
        tick: function () {
          var rig = document.querySelector('#rig');
          var panel = this.el;
          if (!rig) return;
          var rigWorldPos = new THREE.Vector3();
          var rigWorldQuat = new THREE.Quaternion();
          rig.object3D.getWorldPosition(rigWorldPos);
          rig.object3D.getWorldQuaternion(rigWorldQuat);

          // Place le panneau devant la caméra, à 4m, hauteur 2m
          var cameraDir = new THREE.Vector3(0, 0, -1).applyQuaternion(rigWorldQuat);
          var newPos = rigWorldPos.clone().add(cameraDir.multiplyScalar(4));
          newPos.y += 0.2; // hauteur confortable
          panel.object3D.position.copy(newPos);

          // Oriente le panneau vers la caméra
          panel.object3D.lookAt(rigWorldPos.x, rigWorldPos.y + 1.2, rigWorldPos.z);
        }
      });
    </script>
  </a-scene>
</body>
</html>

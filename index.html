<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <title>Section Sportive - Lycée Louis de Cormontaigne à Metz</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no" />
  <script src="https://aframe.io/releases/1.7.0/aframe.min.js"></script>
  <style>
    body {
      margin: 0;
      overflow: hidden;
      background: #111;
      font-family: Arial, sans-serif;
      color: #eee;
    }
    #instructions {
      position: fixed;
      bottom: 10px;
      width: 100%;
      text-align: center;
      font-size: 1rem;
      background: rgba(0,0,0,0.5);
      padding: 8px 10px;
      z-index: 9999;
      user-select: none;
    }
    @media (max-width: 600px) {
      #instructions {
        font-size: 1.3rem;
        padding: 12px 10px;
      }
    }
  </style>
</head>
<body>

  <div id="instructions">
    Utilisez la souris (ordinateur) ou bougez votre téléphone (mobile) pour regarder autour. <br />
    Sur ordinateur, déplacez-vous avec ZQSD ou flèches. <br />
    Sur mobile ou VR, touchez pour interagir et activez le mode VR si disponible.
  </div>

  <a-scene 
    background="color: #a0c8f0" 
    shadow="type:pcfsoft" 
    vr-mode-ui="enabled: true" 
    embedded>

    <!-- Sol -->
    <a-plane rotation="-90 0 0" width="30" height="30" color="#3a7d44" receive-shadow="true"></a-plane>

    <!-- Lumières -->
    <a-light type="ambient" color="#666"></a-light>
    <a-light type="directional" color="#fff" intensity="1" position="5 10 5" cast-shadow="true"></a-light>

    <!-- Texte accueil -->
    <a-entity position="0 5 -8" 
              text="value: Section sportive du lycée Louis de Cormontaigne à Metz; align: center; width: 10; color: #222; shader: msdf">
    </a-entity>

    <!-- Ballon de foot (texture approximative) -->
    <a-entity position="-6 0.5 -4" rotation="0 45 0">
      <a-sphere radius="0.5" segments-height="32" segments-width="32" 
                material="color: white; roughness: 0.7; metalness: 0.2" 
                shadow="cast: true">
      </a-sphere>
      <!-- Simulations de pentagones noires -->
      <a-ring position="0 0.45 0" rotation="-90 0 0" radius-inner="0.09" radius-outer="0.12" color="black"></a-ring>
      <a-ring position="0 0.4 0" rotation="-90 36 0" radius-inner="0.09" radius-outer="0.12" color="black"></a-ring>
      <a-ring position="0 0.35 0" rotation="-90 72 0" radius-inner="0.09" radius-outer="0.12" color="black"></a-ring>
      <a-ring position="0 0.3 0" rotation="-90 108 0" radius-inner="0.09" radius-outer="0.12" color="black"></a-ring>
      <a-ring position="0 0.25 0" rotation="-90 144 0" radius-inner="0.09" radius-outer="0.12" color="black"></a-ring>
      <!-- Animation de rebond -->
      <a-animation attribute="position" direction="alternate" dur="1800" repeat="indefinite" to="0 0.65 0"></a-animation>
    </a-entity>

    <!-- Ballon de handball orange -->
    <a-sphere position="0 0.4 -4" radius="0.4" color="#f58426" roughness="0.5" metalness="0.1" shadow="cast: true">
      <a-animation attribute="position" direction="alternate" dur="1000" repeat="indefinite" to="0 0.8 -4"></a-animation>
    </a-sphere>

    <!-- Coureur stylisé -->
    <a-entity position="5 0 -4" rotation="0 20 0" shadow="cast: true">
      <a-cylinder height="1.5" radius="0.3" color="#cc9966" position="0 1 0"></a-cylinder> <!-- Corps -->
      <a-sphere radius="0.3" color="#f1c27d" position="0 2 0"></a-sphere> <!-- Tête -->
      <a-box color="#3366cc" height="0.8" width="0.2" depth="0.2" position="-0.55 1.5 0" rotation="0 0 10" id="brasG"></a-box> <!-- Bras gauche -->
      <a-box color="#3366cc" height="0.8" width="0.2" depth="0.2" position="0.55 1.5 0" rotation="0 0 -10" id="brasD"></a-box> <!-- Bras droit -->
      <a-box color="#223366" height="1" width="0.25" depth="0.25" position="-0.2 0.3 0" rotation="0 0 15" id="jambeG"></a-box> <!-- Jambe gauche -->
      <a-box color="#223366" height="1" width="0.25" depth="0.25" position="0.2 0.3 0" rotation="0 0 -15" id="jambeD"></a-box> <!-- Jambe droite -->
    </a-entity>

    <!-- Professeur animé -->
    <a-entity position="8 0 -4" rotation="0 -20 0" shadow="cast: true">
      <a-box height="1.8" width="0.6" depth="0.4" color="#4caf50" position="0 0.9 0"></a-box> <!-- Corps -->
      <a-sphere radius="0.35" color="#f1c27d" position="0 2 0"></a-sphere> <!-- Tête -->
      <a-box color="#2e7d32" height="0.9" width="0.2" depth="0.2" position="-0.55 1.3 0" rotation="0 0 20" id="profBrasG"></a-box> <!-- Bras gauche -->
      <a-box color="#2e7d32" height="0.9" width="0.2" depth="0.2" position="0.55 1.3 0" rotation="0 0 -20" id="profBrasD"></a-box> <!-- Bras droit -->
    </a-entity>

    <!-- Caméra avec contrôle souris/clavier et gyroscope mobile -->
    <a-entity camera position="0 1.6 10" look-controls wasd-controls>
      <a-entity cursor="fuse: true; fuseTimeout: 1000"
                position="0 0 -1"
                geometry="primitive: ring; radiusInner: 0.02; radiusOuter: 0.03"
                material="color: white; shader: flat">
      </a-entity>
    </a-entity>

    <script>
      // Animation bras et jambes coureur + bras professeur
      const scene = document.querySelector('a-scene');
      scene.addEventListener('loaded', () => {
        const brasG = document.getElementById('brasG');
        const brasD = document.getElementById('brasD');
        const jambeG = document.getElementById('jambeG');
        const jambeD = document.getElementById('jambeD');
        const profBrasG = document.getElementById('profBrasG');
        const profBrasD = document.getElementById('profBrasD');

        let angle = 0;
        function animate() {
          angle += 0.05;
          brasG.setAttribute('rotation', `0 0 ${Math.sin(angle) * 30 + 10}`);
          brasD.setAttribute('rotation', `0 0 ${-Math.sin(angle) * 30 - 10}`);
          jambeG.setAttribute('rotation', `0 0 ${-Math.sin(angle) * 30 + 15}`);
          jambeD.setAttribute('rotation', `0 0 ${Math.sin(angle) * 30 - 15}`);

          profBrasG.setAttribute('rotation', `0 0 ${Math.sin(angle * 0.7) * 40 + 20}`);
          profBrasD.setAttribute('rotation', `0 0 ${-Math.sin(angle * 0.7) * 40 - 20}`);

          requestAnimationFrame(animate);
        }
        animate();
      });
    </script>

  </a-scene>
</body>
</html>
